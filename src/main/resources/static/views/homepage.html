<!DOCTYPE html>
<html lang="en" xmlns:v-on="http://www.w3.org/1999/xhtml" xmlns:v-for="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>首页</title>


    <!-- === CSS === -->
    <link rel="stylesheet" href="../bootstrap-4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900">
    <link rel="stylesheet" href="../css/homepage.css">
    <!--<link rel="stylesheet" href="https://cdn.bootcss.com/element-ui/2.10.1/theme-chalk/index.css" >-->

</head>
<body>


<div id="vue">

    <div id="myCarousel" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel" data-slide-to="1"></li>
            <li data-target="#myCarousel" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img :src="news[0].imagePathList[0]">
                <div class="container">
                    <div class="carousel-caption ">
                        <h1>{{news[0].title}}</h1>
                        <p><a class="btn btn-lg btn-primary" href="#" role="button" v-on:click="turnIntoContent('views/dynamic_message.html', 'views/news.html', 'views/message_content1.html', news[0].id)">查看详情</a></p>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <img :src="news[1].imagePathList[0]">
                <div class="container">
                    <div class="carousel-caption">
                        <h1>{{news[1].title}}</h1>
                        <p><a class="btn btn-lg btn-primary" href="#" role="button" v-on:click="turnIntoContent('views/dynamic_message.html', 'views/news.html', 'views/message_content1.html', news[1].id)">查看详情</a></p>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <img :src="news[2].imagePathList[0]">
                <div class="container">
                    <div class="carousel-caption ">
                        <h1>{{news[2].title}}</h1>
                        <p><a class="btn btn-lg btn-primary" href="#" role="button" v-on:click="turnIntoContent('views/dynamic_message.html', 'views/news.html', 'views/message_content1.html', news[2].id)">查看详情</a></p>
                    </div>
                </div>
            </div>
        </div>
        <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    <hr>
    <div id="messageContent">
        <div id="dynamic_message" class="row">
            <div class="col-6">
                <p style="float: left">新闻动态</p>&nbsp
                <a href="#" v-on:click="turnPage('views/news.html', 'views/dynamic_message.html')" class="text-decoration-none">more<span style="font-size: 0.5rem">>></span></a>
                <div class="clearfix"></div>
                <ul v-for="news in newsList.slice(0, 8)" style="margin: 0; padding-left: 0">
                    <a href="#" v-on:click="turnIntoContent('views/dynamic_message.html', 'views/news.html', 'views/message_content1.html', news.id)"
                       style="font-size: 0.8rem; line-height: 0.5; color: rgb(90, 90, 90)" class="text-decoration-none">{{news.title}}</a>
                    <span class="time">{{news.time}}</span>

                </ul>


            </div>
            <div class="col-6" style="border-left: .05rem solid #e5e5e5">
                <p style="float: left">学术活动</p>&nbsp
                <a href="#" v-on:click="turnPage('views/academic_activities.html', 'views/dynamic_message.html')" class="text-decoration-none">more<span style="font-size: 0.5rem">>></span></a>
                <div class="clearfix"></div>
                <ul v-for="activities in activitiesList.slice(0, 8)" style="margin: 0; padding-left: 0">
                    <a href="#" v-on:click="turnIntoContent('views/dynamic_message.html', 'views/academic_activities.html', 'views/message_content1.html', activities.id)"
                       style="font-size: 0.8rem; line-height: 0.5; color: rgb(90, 90, 90)" class="text-decoration-none">{{activities.title}}</a>
                    <span class="time">{{activities.time}}</span>

                </ul>
            </div>

        </div>
        <hr>
        <div id="" class="row">
            <div class="col-8">
                <p style="float: left">通知动态</p>&nbsp
                <a href="#" v-on:click="turnPage('views/notice.html', 'views/dynamic_message.html')" class="text-decoration-none">more<span style="font-size: 0.5rem">>></span></a>
                <div class="clearfix"></div>
                <ul v-for="notice in noticeList.slice(0, 8)" style="margin: 0; padding-left: 0">
                    <a href="#" v-on:click="turnIntoContent('views/dynamic_message.html', 'views/notice.html', 'views/message_content1.html', notice.id)"
                       style="font-size: 0.8rem; line-height: 0.5; color: rgb(90, 90, 90)" class="text-decoration-none">{{notice.title}}</a>
                    <span  class="time">{{notice.time}}</span>

                </ul>
            </div>
            <div class="col-4" style="border-left: .05rem solid #e5e5e5">
                <p>友情链接:</p>
                <p class="link"><a href="http://www.bit.edu.cn/m/index.htm" class="text-decoration-none">北京理工大学</a></p>
                <p class="link"><a href="http://cs.bit.edu.cn/" class="text-decoration-none">计算机学院</a></p>
                <p class="link"><a href="http://ss.bit.edu.cn/" class="text-decoration-none">软件学院</a></p>
                <p class="link"><a href="http://grd.bit.edu.cn/" class="text-decoration-none">研究生院</a></p>

            </div>
        </div>


    </div>

</div>
</body>
<!-- === JS === -->
<script src="../js/jquery-3.2.1.slim.min.js"></script>
<script src="../js/popper.min.js"></script>
<script src="../bootstrap-4.3.1/js/bootstrap.min.js"></script>
<!--引入vue-->
<script src="https://unpkg.com/vue/dist/vue.min.js"></script>
<!-- 引入element-ui组件库 -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<!--jquery-->
<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<!--<script src="https://cdn.bootcss.com/element-ui/2.10.1/locale/zh-CN.min.js"></script>-->
<script>
    var homepageVue = new Vue({
        el: "#vue",
        data: {
            src: "homepage.html",
            newsList: [],
            noticeList: [],
            activitiesList: [],
            news: [
                {
                    content: "9月5日，北京理工大学召开“双一流”建设中期评估会。中国高等教育学会会长、教育部原党组副书记、副部长杜玉波研究员，大连理工大学校长郭东明院士，南京理工大学王泽山院士，哈尔滨工业大学杜善义院士，中央军委科学技术委员会卢锡城院士，南开大学葛墨林院士，东北大学柴天佑院士，国家自然科学基金委员会数学物理科学部主任江松院士，北京理工大学方岱宁院士，中国高等教育学会副秘书长郝清杰研究员，教育部重大课题《世界一流大学和一流学科建设评价体系与推进战略研究》首席专家王战军研究员等各领域知名专家组成专家组，对学校“双一流”整体建设情况进行评估。全体校领导，校长助理，各专业学院院长、相关职能部门负责人参加了会议。会议由校长张军院士主持。",
                    id: 1,
                    imagePathList:["../images/news/20190725071257596813.jpg", "../images/news/20190808074613928858.jpg", "../images/news/20190808074710375903.jpg"],
                    time: "1985-01-12 12:00:00",
                    title: "北京理工大学召开“双一流”建设中期评估会",
                    type: 0,
                    userId: "6120162000",
                    userName: "王二哈"
                },
                {
                    content: "学校党委书记赵长禄、校长张军、副校长王晓锋、副校长李和章、党委副书记包丽颖和校长助理汪本聪等校领导来到迎新现场，与前来报到的新生及家长热情交流，亲切慰问迎新志愿者和工作人员，并走访学生宿舍，了解新生情况。此外，校领导还带队还检查了睿信书院、明德书院办公空间和求是书院社区空间的建设情况。",
                    id: 2,
                    imagePathList: ["../images/news/20190808074855137062.jpg"],
                    time: "1958-02-12 15:00:00",
                    title: "北京理工大学喜迎2019级本科新生入校",
                    type: 0,
                    userId: "6120162000",
                    userName: "王二哈"
                },
                {
                    content: "今年4月，北京延庆举办了国际园林界级别最高的世界园艺博览会，来自数十个国家的元首和嘉宾共900多名代表应邀出席了北京世园会开幕式，当晚的开幕盛典，夜空燃放了绚丽的迎宾焰火，令人倍感震撼，这其中包含了学校烟火技术团队成员的努力。",
                    id: 3,
                    imagePathList: ["../images/news/20190821171443229077.jpg"],
                    time: "2019-09-07 21:21:48",
                    title: "北京世界园艺博览会向北理工颁发荣誉证书",
                    type: 0,
                    userId: "1120162001",
                    userName: "吕小布"
                }
            ]
        },
        methods: {
            turnIntoContent(grandpa, father, son, id) {
                console.log(grandpa, father, son, id);
                window.parent.indexVue.messageId = id;
                window.parent.indexVue.currentPage = son;
                window.parent.indexVue.turnPage(grandpa);
                window.parent.document.getElementById("main-frame").contentWindow.childVue.childSrc = father.slice(6);
                window.parent.document.getElementById("main-frame").contentWindow.childVue.childActiveIndex = father.slice(6);
                window.parent.indexVue.activeIndex = key;
            },
            turnPage(key, keyPath) {
                console.log(key, keyPath);
                window.parent.indexVue.currentPage = key;
                window.parent.indexVue.turnPage(keyPath);
                window.parent.document.getElementById("main-frame").contentWindow.childVue.childSrc = key.slice(6);
                window.parent.document.getElementById("main-frame").contentWindow.childVue.childActiveIndex = key.slice(6);
                window.parent.indexVue.activeIndex = key;
            }
        },
        mounted(){
            window.scrollTo(0, 0);
            $.ajax({
                url: "/contribution/getContributionById",
                type: "get",
                data: {
                    id: 1
                },
                success(res){
                    console.log(res.datas);
                    homepageVue.news[0] = res.datas;
                    $.ajax({
                        url: "/contribution/getContributionById",
                        type: "get",
                        data: {
                            id: 2
                        },
                        success(res){
                            console.log(res.datas);
                            homepageVue.news[1] = res.datas;
                            $.ajax({
                                url: "/contribution/getContributionById",
                                type: "get",
                                data: {
                                    id: 3
                                },
                                success(res){
                                    console.log(res.datas);
                                    homepageVue.news[2] = res.datas;
                                }
                            });
                        }
                    });
                }
            });


            $.ajax({
                url: "/contribution/getContributionInfo",
                type: "get",
                data: {
                    type: 0
                },
                success(res){
                    console.log(res.datas);
                    homepageVue.newsList = res.datas;
                    for (var i=0; i<homepageVue.newsList.length; i++) {
                        homepageVue.newsList[i].time = homepageVue.newsList[i].time.split(' ')[0];
                    }
                }
            });
            $.ajax({
                url: "/contribution/getContributionInfo",
                type: "get",
                data: {
                    type: 1
                },
                success(res){
                    console.log(res.datas);
                    homepageVue.noticeList = res.datas;
                    for (var i=0; i<homepageVue.noticeList.length; i++) {
                        homepageVue.noticeList[i].time = homepageVue.noticeList[i].time.split(' ')[0];
                    }
                }
            });
            $.ajax({
                url: "/contribution/getContributionInfo",
                type: "get",
                data: {
                    type: 2
                },
                success(res){
                    console.log(res.datas);
                    homepageVue.activitiesList = res.datas;
                    for (var i=0; i<homepageVue.activitiesList.length; i++) {
                        homepageVue.activitiesList[i].time = homepageVue.activitiesList[i].time.split(' ')[0];
                    }
                }
            });

        }

    })
</script>

</html>